{"version":3,"sources":["sticky-cart.js"],"names":["$","findStickyTopMargin","tray","toolbar","header","offset","height","length","outerHeight","setStickyCartPosition","cart","stickyOffset","newOffsetStyle","parent","width","offsetStyle","replaceWith","appendTo","Drupal","behaviors","stickyCart","attach","context","settings","not","Waypoint","Sticky","element","stuckClass","addClass","window","resize","setTimeout","jQuery"],"mappings":"CAAC,SAAUA,GACT,YAIA,SAASC,KACP,GAAIC,GAAOF,EAAE,mDACTG,EAAUH,EAAE,gBACZI,EAASJ,EAAE,wBAEXK,EAASD,EAAOE,SAAW,EAU/B,OARIH,GAAQI,OAAS,IACnBF,GAAUF,EAAQK,eAGhBN,EAAKK,OAAS,IAChBF,GAAUH,EAAKM,eAGVH,EAGT,QAASI,GAAsBC,GAC7B,GAAIC,GAAeV,IAEfW,EAAiBZ,EAAE,8EAAgFW,EAAe,cAAgBD,EAAKG,SAASC,QAAU,6BAE1JC,GACFA,EAAYC,YAAYJ,GAExBA,EAAeK,SAAS,QAG1BF,EAAcH,EA/BhB,GAAIG,EAkCJG,QAAOC,UAAUC,YACfC,OAAQ,SAAUC,EAASC,GACzB,GAAIb,GAAOV,EAAE,oCAAqCsB,GAASE,IAAI,2BAC3Db,EAAeV,IAAwB,IAE3C,IAAIS,EAAKH,OAAS,EAAG,CACN,GAAIkB,UAASC,QACxBC,QAASjB,EAAK,GACdkB,WAAY,WACZvB,OAAQM,GAGVD,GAAKmB,SAAS,0BAEd7B,EAAE8B,QAAQC,OAAO,WACftB,EAAsBC,KAGxBD,EAAsBC,GAEtBsB,WAAW,WACTvB,EAAsBC,IACrB,SAITuB","file":"../sticky-cart.js","sourcesContent":["(function ($) {\n  'use strict';\n\n  var offsetStyle;\n\n  function findStickyTopMargin() {\n    var tray = $('.toolbar-tray.is-active.toolbar-tray-horizontal');\n    var toolbar = $('.toolbar-bar');\n    var header = $('.PageSection--header');\n\n    var offset = header.height() + 25;\n\n    if (toolbar.length > 0) {\n      offset += toolbar.outerHeight();\n    }\n\n    if (tray.length > 0) {\n      offset += tray.outerHeight();\n    }\n\n    return offset;\n  }\n\n  function setStickyCartPosition(cart) {\n    var stickyOffset = findStickyTopMargin();\n\n    var newOffsetStyle = $('<style>@media (min-width: 780px) { .js-stickyCartProcessed.js-stuck { top: ' + stickyOffset + 'px; width: ' + cart.parent().width() + 'px !important; } }</style>');\n\n    if (offsetStyle) {\n      offsetStyle.replaceWith(newOffsetStyle);\n    } else {\n      newOffsetStyle.appendTo('head');\n    }\n\n    offsetStyle = newOffsetStyle;\n  }\n\n  Drupal.behaviors.stickyCart = {\n    attach: function (context, settings) {\n      var cart = $('.layout-region-checkout-secondary', context).not('.js-stickyCartProcessed');\n      var stickyOffset = findStickyTopMargin() + 'px';\n\n      if (cart.length > 0) {\n        var sticky = new Waypoint.Sticky({\n          element: cart[0],\n          stuckClass: 'js-stuck',\n          offset: stickyOffset\n        });\n\n        cart.addClass('js-stickyCartProcessed');\n\n        $(window).resize(function () {\n          setStickyCartPosition(cart);\n        });\n\n        setStickyCartPosition(cart);\n\n        setTimeout(function () {\n          setStickyCartPosition(cart);\n        }, 1000);\n      }\n    }\n  };\n}(jQuery));\n"]}